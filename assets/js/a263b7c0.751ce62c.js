"use strict";(self.webpackChunklangflow_docs=self.webpackChunklangflow_docs||[]).push([[8615],{7293:(e,n,t)=>{t.d(n,{A:()=>_});var i=t(6540),s=t(4848);function o(e){const{mdxAdmonitionTitle:n,rest:t}=function(e){const n=i.Children.toArray(e),t=n.find((e=>i.isValidElement(e)&&"mdxAdmonitionTitle"===e.type)),o=n.filter((e=>e!==t)),r=t?.props.children;return{mdxAdmonitionTitle:r,rest:o.length>0?(0,s.jsx)(s.Fragment,{children:o}):null}}(e.children),o=e.title??n;return{...e,...o&&{title:o},children:t}}var r=t(8215),a=t(1312),c=t(7559);const l={admonition:"admonition_xJq3",admonitionHeading:"admonitionHeading_Gvgb",admonitionIcon:"admonitionIcon_Rf37",admonitionContent:"admonitionContent_BuS1"};function d(e){let{type:n,className:t,children:i}=e;return(0,s.jsx)("div",{className:(0,r.A)(c.G.common.admonition,c.G.common.admonitionType(n),l.admonition,t),children:i})}function h(e){let{icon:n,title:t}=e;return(0,s.jsxs)("div",{className:l.admonitionHeading,children:[(0,s.jsx)("span",{className:l.admonitionIcon,children:n}),t]})}function u(e){let{children:n}=e;return n?(0,s.jsx)("div",{className:l.admonitionContent,children:n}):null}function m(e){const{type:n,icon:t,title:i,children:o,className:r}=e;return(0,s.jsxs)(d,{type:n,className:r,children:[i||t?(0,s.jsx)(h,{title:i,icon:t}):null,(0,s.jsx)(u,{children:o})]})}function x(e){return(0,s.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})})}const f={icon:(0,s.jsx)(x,{}),title:(0,s.jsx)(a.A,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)",children:"note"})};function p(e){return(0,s.jsx)(m,{...f,...e,className:(0,r.A)("alert alert--secondary",e.className),children:e.children})}function g(e){return(0,s.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})})}const j={icon:(0,s.jsx)(g,{}),title:(0,s.jsx)(a.A,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)",children:"tip"})};function v(e){return(0,s.jsx)(m,{...j,...e,className:(0,r.A)("alert alert--success",e.className),children:e.children})}function y(e){return(0,s.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})})}const b={icon:(0,s.jsx)(y,{}),title:(0,s.jsx)(a.A,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)",children:"info"})};function w(e){return(0,s.jsx)(m,{...b,...e,className:(0,r.A)("alert alert--info",e.className),children:e.children})}function C(e){return(0,s.jsx)("svg",{viewBox:"0 0 16 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})})}const M={icon:(0,s.jsx)(C,{}),title:(0,s.jsx)(a.A,{id:"theme.admonition.warning",description:"The default label used for the Warning admonition (:::warning)",children:"warning"})};function A(e){return(0,s.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})})}const L={icon:(0,s.jsx)(A,{}),title:(0,s.jsx)(a.A,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)",children:"danger"})};const k={icon:(0,s.jsx)(C,{}),title:(0,s.jsx)(a.A,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)",children:"caution"})};const N={...{note:p,tip:v,info:w,warning:function(e){return(0,s.jsx)(m,{...M,...e,className:(0,r.A)("alert alert--warning",e.className),children:e.children})},danger:function(e){return(0,s.jsx)(m,{...L,...e,className:(0,r.A)("alert alert--danger",e.className),children:e.children})}},...{secondary:e=>(0,s.jsx)(p,{title:"secondary",...e}),important:e=>(0,s.jsx)(w,{title:"important",...e}),success:e=>(0,s.jsx)(v,{title:"success",...e}),caution:function(e){return(0,s.jsx)(m,{...k,...e,className:(0,r.A)("alert alert--warning",e.className),children:e.children})}}};var T=t(6763);function _(e){const n=o(e),t=(i=n.type,N[i]||(T.warn(`No admonition component found for admonition type "${i}". Using Info as fallback.`),N.info));var i;return(0,s.jsx)(t,{...n})}},7533:(e,n,t)=>{t.d(n,{A:()=>a});var i=t(6540),s=t(1122),o=t(6025),r=t(4848);const a=e=>{let{alt:n,sources:t,style:a}=e;const[c,l]=(0,i.useState)(!1),d=e=>{"Escape"===e.key&&l(!1)};(0,i.useEffect)((()=>(c?document.addEventListener("keydown",d):document.removeEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)})),[c]);return(0,r.jsx)("div",{className:"zoomable-image "+(c?"fullscreen":""),onClick:()=>{l(!c)},style:{width:"50%",margin:"0 auto",display:"flex",justifyContent:"center",...a},children:(0,r.jsx)(s.A,{className:"zoomable-image-inner",alt:n,sources:{light:(0,o.Ay)(t.light),dark:(0,o.Ay)(t.dark)}})})}},7906:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>d});t(6540);var i=t(4848),s=t(8453),o=(t(1122),t(6025),t(7533),t(7293));const r={},a="Chains",c={id:"components/chains",title:"Chains",description:"This page may contain outdated information. It will be updated as soon as possible.",source:"@site/docs/components/chains.mdx",sourceDirName:"components",slug:"/components/chains",permalink:"/components/chains",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{}},l={},d=[{value:"CombineDocsChain",id:"combinedocschain",level:2},{value:"ConversationChain",id:"conversationchain",level:2},{value:"ConversationalRetrievalChain",id:"conversationalretrievalchain",level:2}];function h(e){const n=Object.assign({h1:"h1",p:"p",hr:"hr",h2:"h2",code:"code",a:"a",strong:"strong",ul:"ul",li:"li"},(0,s.RP)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"chains",children:"Chains"}),"\n",(0,i.jsx)(o.A,{type:"warning",title:"warning",children:(0,i.jsx)(n.p,{children:"This page may contain outdated information. It will be updated as soon as possible."})}),"\n",(0,i.jsx)(n.p,{children:"Chains, in the context of language models, refer to a series of calls made to a language model. This approach allows for using the output of one call as the input for another. Different chain types facilitate varying complexity levels, making them useful for creating pipelines and executing specific scenarios."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"combinedocschain",children:"CombineDocsChain"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"CombineDocsChain"})," includes methods to combine or aggregate loaded documents for question-answering functionality."]}),"\n",(0,i.jsxs)(n.p,{children:["Acts as a proxy for LangChain\u2019s ",(0,i.jsx)(n.a,{href:"https://python.langchain.com/docs/modules/chains/document/",children:"documents"})," chains produced by the ",(0,i.jsx)(n.code,{children:"load_qa_chain"})," function."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"LLM:"})," Language Model to use in the chain."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"chain_type:"})," Type of chain to be used, each applying a different combination strategy:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"stuff"}),": Most straightforward document chain. It takes a list of documents, inserts them all into a prompt, and passes that prompt to an LLM. Suitable for cases where documents are small and few."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"map_reduce"}),": Applies an LLM to each document individually (the ",(0,i.jsx)(n.code,{children:"Map"})," step), treating the output as a new document. It then combines these documents to get a single output (the ",(0,i.jsx)(n.code,{children:"Reduce"})," step). Compression may occur to ensure documents fit in the final chain."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"map_rerank"}),": Runs an initial prompt on each document to complete a task and score its certainty. Returns the highest-scoring response."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"refine"}),": Iteratively updates its answer by looping over the input documents. Each document, along with the latest intermediate answer, is passed to an LLM to generate a new response. This method suits tasks requiring analysis of more documents than the model's context can handle, though it can be less effective for tasks requiring detailed cross-referencing or comprehensive information."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"conversationchain",children:"ConversationChain"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ConversationChain"})," facilitates dynamic, interactive conversations with a language model, ideal for chatbots or virtual assistants."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"LLM:"})," Language Model to use in the chain."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Memory:"})," Default memory store."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"input_key:"})," Specifies the key under which user input is stored in the conversation memory, enabling the chain to process and generate responses."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"output_key:"})," Specifies the key under which the generated response is stored, allowing retrieval of the response using this key."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"verbose:"})," Controls the verbosity of the chain's output. Set to ",(0,i.jsx)(n.code,{children:"True"})," to enable detailed internal state outputs, useful for debugging and understanding the chain's behavior. Defaults to ",(0,i.jsx)(n.code,{children:"False"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"conversationalretrievalchain",children:"ConversationalRetrievalChain"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ConversationalRetrievalChain"})," combines document search with question-answering capabilities, extracting information and providing answers."]}),"\n",(0,i.jsx)(n.p,{children:"A retriever finds documents based on a query but doesn\u2019t store them; it returns the documents matching the query."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"LLM:"})," Language Model to use in the chain."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Memory:"})," Default memory store."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Retriever:"})," The retriever used to fetch relevant documents."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"chain_type:"})," Type of chain to be used, each applying a different combination strategy:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"stuff"}),": Inserts a list of documents into a prompt and passes it to an LLM. Suitable for cases where documents are small and few."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"map_reduce"}),": Processes each document with an LLM separately, combines them for a single output. Compressions may occur to fit documents into the final chain."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"map_rerank"}),": Scores responses based on certainty from each document, returns the highest."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"refine"}),": Updates answers iteratively by looping through documents, passing each with intermediate answers to an LLM for a new response. This method is beneficial for tasks that involve extensive document analysis."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"return_source_documents:"})," Specifies whether to include source documents used in the output. Useful for providing context or references to the user. Defaults to ",(0,i.jsx)(n.code,{children:"True"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"verbose:"})," Controls verbosity of output. Set to ",(0,i.jsx)(n.code,{children:"True"})," for detailed logs, useful for debugging. Defaults to ",(0,i.jsx)(n.code,{children:"False"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{})]})}const u=function(e={}){const{wrapper:n}=Object.assign({},(0,s.RP)(),e.components);return n?(0,i.jsx)(n,Object.assign({},e,{children:(0,i.jsx)(h,e)})):h(e)}},8453:(e,n,t)=>{t.d(n,{RP:()=>o,xA:()=>a});var i=t(6540);const s=i.createContext({});function o(e){const n=i.useContext(s);return i.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const r={};function a({components:e,children:n,disableParentContext:t}){let a;return a=t?"function"==typeof e?e({}):e||r:o(e),i.createElement(s.Provider,{value:a},n)}}}]);